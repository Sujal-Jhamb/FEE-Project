<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTech - Course Catalog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Global Styles */
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f39c12;
            --text-color: #333;
            --bg-color: #f4f4f4;
            --white: #ffffff;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background-color: #3a7bd5;
            border-color: #3a7bd5;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-brand img {
            max-height: 40px;
        }

        .nav-link {
            position: relative;
            padding: 0.5rem 1rem !important;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--primary-color);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
            left: 0;
        }

        /* Search Bar Styles */
        #searchBar {
            max-width: 500px;
            margin: 2rem auto;
        }

        /* Course Card Styles */
        .course-card {
            transition: var(--transition);
            height: 100%;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .course-card img {
            height: 200px;
            object-fit: cover;
        }

        /* Course Details Styles */
        .course-details {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }

        .course-details-content {
            background-color: var(--white);
            margin: 2rem auto;
            padding: 2rem;
            max-width: 800px;
            border-radius: 10px;
        }

        /* Progress Bar Styles */
        .progress {
            height: 20px;
            margin-bottom: 1rem;
        }

        .progress-bar {
            background-color: var(--primary-color);
        }

        /* Category Button Styles */
        .category-buttons .btn {
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Rating Styles */
        .rating {
            color: #f39c12;
            font-size: 0.9rem;
        }

        .rating .stars {
            margin-right: 5px;
        }

        .rating-value {
            font-weight: bold;
            margin-right: 3px;
        }

        .rating-count {
            color: #777;
            font-size: 0.8rem;
        }

        /* Difficulty Badge Styles */
        .difficulty {
            font-size: 0.8rem;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-weight: bold;
        }

        .difficulty-beginner {
            background-color: #28a745;
            color: white;
        }

        .difficulty-intermediate {
            background-color: #ffc107;
            color: black;
        }

        .difficulty-advanced {
            background-color: #dc3545;
            color: white;
        }

        /* Instructor Styles */
        .instructor {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .instructor img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        /* Sort Dropdown Styles */
        #sortDropdown {
            margin-bottom: 1rem;
        }

        .chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4a90e2;
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .chat-button i {
            font-size: 24px;
        }

        .chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            height: 400px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .chat-header {
            background-color: #4a90e2;
            color: white;
            padding: 10px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
        }

        #close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 10px;
            overflow-y: auto;
        }

        .chat-input {
            display: flex;
            padding: 10px;
        }

        #user-input {
            flex-grow: 1;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        #send-message {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 5px 10px;
            margin-left: 5px;
            border-radius: 3px;
            cursor: pointer;
        }

        .message {
            margin-bottom: 10px;
            padding: 5px 10px;
            border-radius: 5px;
            max-width: 80%;
        }

        .user-message {
            background-color: #e6f2ff;
            align-self: flex-end;
            margin-left: auto;
        }

        .bot-message {
            background-color: #f0f0f0;
            align-self: flex-start;
        }

        .course-suggestion {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }

        .course-suggestion h4 {
            margin-top: 0;
        }

        .course-suggestion button {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            margin-top: 5px;
        }
    </style>
</head>

<body>
    <header class="fixed-top">
        <nav class="navbar navbar-expand-lg navbar-light container">
            <a class="navbar-brand" href="#">
                <img src="./images/EduLogo.png" alt="EduTech Logo" class="img-fluid">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="./index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="./course.html">Courses</a></li>
                    <li class="nav-item"><a class="nav-link" href="./codezeck.html">Practice</a></li>
                    <li class="nav-item"><a class="nav-link" href="./certification.html">Certifications</a></li>
                </ul>
            </div>
            <div id="loginContainer">
                <button id="loginButton" class="btn btn-outline-primary ms-3">Login</button>
            </div>
            <div id="profileContainer" style="display: none;">
                <div class="dropdown">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="profileDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" id="userEmail" href="#"></a></li>
                        <li><a class="dropdown-item" href="#">My Courses</a></li>
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" id="logoutButton" href="#">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="container" style="margin-top: 80px;">
        <h1 class="text-center my-5">Course Catalog</h1>

        <div id="searchBar" class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Search for courses" aria-label="Search for courses"
                id="searchInput">
            <button class="btn btn-primary" type="button" id="searchButton">Search</button>
        </div>

        <div id="categoryContainer" class="mb-4"></div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div id="sortDropdown" class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="sortButton"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Sort by
                </button>
                <ul class="dropdown-menu" aria-labelledby="sortButton">
                    <li><a class="dropdown-item" href="#" data-sort="popularity">Popularity</a></li>
                    <li><a class="dropdown-item" href="#" data-sort="rating">Rating</a></li>
                    <li><a class="dropdown-item" href="#" data-sort="newest">Newest</a></li>
                </ul>
            </div>
            <div id="courseCount" class="text-muted"></div>
        </div>

        <div id="courseList" class="row g-4">
            <!-- Course cards will be dynamically inserted here -->
        </div>
    </main>

    <div id="courseDetails" class="course-details">
        <div class="course-details-content">
            <!-- Course details will be dynamically inserted here -->
        </div>
    </div>

    <!-- Chat button -->
    <div id="chat-button" class="chat-button">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Chat container -->
    <div id="chat-container" class="chat-container">
        <div class="chat-header">
            <h3>EduTech Assistant</h3>
            <button id="close-chat">Ã—</button>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Type your message...">
            <button id="send-message">Send</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script>

    <script>
        // Course categories
        const courseCategories = [
            "Programming Languages",
            "Web Development",
            "Mobile Development",
            "Data Science",
            "Artificial Intelligence",
            "Cybersecurity",
            "Computer Networks",
            "Database Management",
            "Software Engineering",
            "Cloud Computing"
        ];

        // Expanded course data
        const courses = [
            {
                id: 1,
                title: "Python for Beginners",
                description: "Learn the basics of Python programming.",
                image: "./images/Python.jpg",
                category: "Programming Languages",
                enrolled: false,
                progress: 0,
                lectures: 40,
                rating: 4.5,
                ratingCount: 1250,
                difficulty: "beginner",
                instructor: {
                    name: "John Doe",
                    avatar: "./images/profile.jpg"
                },
                duration: "6 weeks",
                dateAdded: new Date("2023-01-15")
            },
            {
                id: 2,
                title: "Advanced Java Programming",
                description: "Master advanced Java concepts and techniques.",
                image: "./images/Java.jpg",
                category: "Programming Languages",
                enrolled: false,
                progress: 0,
                lectures: 50,
                rating: 4.7,
                ratingCount: 980,
                difficulty: "advanced",
                instructor: {
                    name: "Jane Smith",
                    avatar: "./images/profile.jpg"
                },
                duration: "8 weeks",
                dateAdded: new Date("2023-02-20")
            },
            {
                id: 3,
                title: "Full Stack Web Development",
                description: "Build modern web applications from front to back.",
                image: "./images/FullStack.png",
                category: "Web Development",
                enrolled: false,
                progress: 0,
                lectures: 60,
                rating: 4.8,
                ratingCount: 1500,
                difficulty: "intermediate",
                instructor: {
                    name: "Alice Johnson",
                    avatar: "./images/profile.jpg"
                },
                duration: "12 weeks",
                dateAdded: new Date("2023-03-10")
            },
            {
                id: 4,
                title: "React Native Mobile App Development",
                description: "Create cross-platform mobile apps with React Native.",
                image: "./images/ReactNative.png",
                category: "Mobile Development",
                enrolled: false,
                progress: 0,
                lectures: 45,
                rating: 4.6,
                ratingCount: 820,
                difficulty: "intermediate",
                instructor: {
                    name: "Bob Wilson",
                    avatar: "./images/profile.jpg"
                },
                duration: "10 weeks",
                dateAdded: new Date("2023-04-05")
            },
            {
                id: 5,
                title: "Machine Learning Fundamentals",
                description: "Introduction to machine learning algorithms and applications.",
                image: "./images/MachineLearning.jpg",
                category: "Artificial Intelligence",
                enrolled: false,
                progress: 0,
                lectures: 55,
                rating: 4.9,
                ratingCount: 2000,
                difficulty: "advanced",
                instructor: {
                    name: "Emily Chen",
                    avatar: "./images/profile.jpg"
                },
                duration: "10 weeks",
                dateAdded: new Date("2023-05-01")
            },
            {
                id: 6,
                title: "JavaScript ES6+ Features",
                description: "Explore modern JavaScript features and best practices.",
                image: "./images/JavaScript.jpg",
                category: "Programming Languages",
                enrolled: false,
                progress: 0,
                lectures: 35,
                rating: 4.7,
                ratingCount: 1100,
                difficulty: "intermediate",
                instructor: {
                    name: "David Brown",
                    avatar: "./images/profile.jpg"
                },
                duration: "6 weeks",
                dateAdded: new Date("2023-06-15")
            },
            {
                id: 7,
                title: "Responsive Web Design",
                description: "Create websites that look great on any device.",
                image: "./images/ResponsiveDesign.jpg",
                category: "Web Development",
                enrolled: false,
                progress: 0,
                lectures: 30,
                rating: 4.5,
                ratingCount: 950,
                difficulty: "beginner",
                instructor: {
                    name: "Sarah Lee",
                    avatar: "./images/profile.jpg"
                },
                duration: "4 weeks",
                dateAdded: new Date("2023-07-01")
            },
            {
                id: 8,
                title: "iOS App Development with Swift",
                description: "Build native iOS applications using Swift.",
                image: "./images/Swift.jpg",
                category: "Mobile Development",
                enrolled: false,
                progress: 0,
                lectures: 55,
                rating: 4.8,
                ratingCount: 1300,
                difficulty: "intermediate",
                instructor: {
                    name: "Mike Taylor",
                    avatar: "./images/profile.jpg"
                },
                duration: "10 weeks",
                dateAdded: new Date("2023-08-10")
            },
            {
                id: 9,
                title: "Data Analysis with Python",
                description: "Learn to analyze and visualize data using Python libraries.",
                image: "./images/DataAnalysis.jpg",
                category: "Data Science",
                enrolled: false,
                progress: 0,
                lectures: 50,
                rating: 4.6,
                ratingCount: 1050,
                difficulty: "intermediate",
                instructor: {
                    name: "Laura Martinez",
                    avatar: "./images/profile.jpg"
                },
                duration: "8 weeks",
                dateAdded: new Date("2023-09-05")
            },
            {
                id: 10,
                title: "Deep Learning and Neural Networks",
                description: "Dive into the world of deep learning and neural networks.",
                image: "./images/DeepLearning.png",
                category: "Artificial Intelligence",
                enrolled: false,
                progress: 0,
                lectures: 65,
                rating: 4.9,
                ratingCount: 1800,
                difficulty: "advanced",
                instructor: {
                    name: "Alex Wong",
                    avatar: "./images/profile.jpg"
                },
                duration: "12 weeks",
                dateAdded: new Date("2023-10-01")
            },
            {
                id: 11,
                title: "Ethical Hacking and Penetration Testing",
                description: "Learn to identify and exploit vulnerabilities in computer systems.",
                image: "./images/EthicalHacking.png",
                category: "Cybersecurity",
                enrolled: false,
                progress: 0,
                lectures: 70,
                rating: 4.8,
                ratingCount: 1600,
                difficulty: "advanced",
                instructor: {
                    name: "Chris Black",
                    avatar: "./images/profile.jpg"
                },
                duration: "10 weeks",
                dateAdded: new Date("2023-11-15")
            },
            {
                id: 12,
                title: "Network Security Fundamentals",
                description: "Understand the basics of securing computer networks.",
                image: "./images/NetworkSecurity.png",
                category: "Computer Networks",
                enrolled: false,
                progress: 0,
                lectures: 45,
                rating: 4.5,
                ratingCount: 900,
                difficulty: "intermediate",
                instructor: {
                    name: "Emma White",
                    avatar: "./images/profile.jpg"
                },
                duration: "8 weeks",
                dateAdded: new Date("2023-12-01")
            },
            {
                id: 13,
                title: "SQL and Database Design",
                description: "Master SQL queries and learn to design efficient databases.",
                image: "./images/SQL.png",
                category: "Database Management",
                enrolled: false,
                progress: 0,
                lectures: 40,
                rating: 4.7,
                ratingCount: 1200,
                difficulty: "intermediate",
                instructor: {
                    name: "Daniel Kim",
                    avatar: "./images/profile.jpg"
                },
                duration: "6 weeks",
                dateAdded: new Date("2024-01-10")
            },
            {
                id: 14,
                title: "DevOps and Continuous Integration",
                description: "Learn to streamline development and deployment processes.",
                image: "./images/DevOps.jpg",
                category: "Software Engineering",
                enrolled: false,
                progress: 0,
                lectures: 55,
                rating: 4.8,
                ratingCount: 1400,
                difficulty: "advanced",
                instructor: {
                    name: "Olivia Green",
                    avatar: "./images/profile.jpg"
                },
                duration: "10 weeks",
                dateAdded: new Date("2024-02-05")
            },
            {
                id: 15,
                title: "AWS Cloud Practitioner",
                description: "Get started with Amazon Web Services and cloud computing.",
                image: "./images/AWS.png",
                category: "Cloud Computing",
                enrolled: false,
                progress: 0,
                lectures: 50,
                rating: 4.6,
                ratingCount: 1100,
                difficulty: "beginner",
                instructor: {
                    name: "Ryan Turner",
                    avatar: "./images/profile.jpg"
                },
                duration: "8 weeks",
                dateAdded: new Date("2024-03-01")
            }
        ];

        // Function to create course cards
        function createCourseCard(course) {
            return `
        <div class="col-md-4 mb-4">
            <div class="card course-card">
                <img src="${course.image}" class="card-img-top" alt="${course.title}">
                <div class="card-body">
                    <h5 class="card-title">${course.title}</h5>
                    <p class="card-text">${course.description}</p>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="text-muted">${course.category}</span>
                        <span class="difficulty difficulty-${course.difficulty}">${course.difficulty}</span>
                    </div>
                    <div class="instructor">
                        <img src="${course.instructor.avatar}" alt="${course.instructor.name}">
                        <span>${course.instructor.name}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="rating">
                            <span class="stars">${createStarRating(course.rating)}</span>
                            <span class="rating-value">${course.rating}</span>
                            <span class="rating-count">(${course.ratingCount})</span>
                        </div>
                        <span class="text-muted">${course.duration}</span>
                    </div>
                    <button class="btn btn-primary mt-2 view-course" data-course-id="${course.id}">View Course</button>
                </div>
            </div>
        </div>
    `;
        }

        // Function to create star rating HTML
        function createStarRating(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5 ? 1 : 0;
            const emptyStars = 5 - fullStars - halfStar;

            return `
        ${'<i class="fas fa-star"></i>'.repeat(fullStars)}
        ${halfStar ? '<i class="fas fa-star-half-alt"></i>' : ''}
        ${'<i class="far fa-star"></i>'.repeat(emptyStars)}
    `;
        }

        // Function to display course details
        function displayCourseDetails(course) {
            const courseDetails = document.getElementById('courseDetails');
            const courseDetailsContent = courseDetails.querySelector('.course-details-content');

            courseDetailsContent.innerHTML = `
        <h2>${course.title}</h2>
        <img src="${course.image}" alt="${course.title}" style="max-width: 100%; height: auto; margin-bottom: 1rem;">
        <p>${course.description}</p>
        <p>Category: ${course.category}</p>
        <p>Difficulty: <span class="difficulty difficulty-${course.difficulty}">${course.difficulty}</span></p>
        <p>Instructor: ${course.instructor.name}</p>
        <p>Duration: ${course.duration}</p>
        <p>Number of lectures: ${course.lectures}</p>
        <div class="rating mb-3">
            <span class="stars">${createStarRating(course.rating)}</span>
            <span class="rating-value">${course.rating}</span>
            <span class="rating-count">(${course.ratingCount} ratings)</span>
        </div>
        ${course.enrolled ? `
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: ${course.progress}%;" aria-valuenow="${course.progress}" aria-valuemin="0" aria-valuemax="100">${course.progress}%</div>
            </div>
            <button class="btn btn-primary continue-course" data-course-id="${course.id}">Continue Course</button>
        ` : `
            <button class="btn btn-primary enroll-course" data-course-id="${course.id}">Enroll Now</button>
        `}
        <button class="btn btn-secondary mt-3 close-details">Close</button>
    `;

            courseDetails.style.display = 'block';

            // Add event listeners for enroll and close buttons
            const enrollButton = courseDetailsContent.querySelector('.enroll-course');
            if (enrollButton) {
                enrollButton.addEventListener('click', () => enrollCourse(course.id));
            }

            const continueButton = courseDetailsContent.querySelector('.continue-course');
            if (continueButton) {
                continueButton.addEventListener('click', () => continueCourse(course.id));
            }

            const closeButton = courseDetailsContent.querySelector('.close-details');
            closeButton.addEventListener('click', () => {
                courseDetails.style.display = 'none';
            });
        }

        // Function to enroll in a course
        function enrollCourse(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (course) {
                course.enrolled = true;
                course.progress = 0;
                alert(`You have successfully enrolled in ${course.title}`);
                displayCourseDetails(course);
            }
        }

        // Function to continue a course (simulate progress)
        function continueCourse(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (course && course.enrolled) {
                course.progress = Math.min(course.progress + 10, 100);
                alert(`You've made progress in ${course.title}. Current progress: ${course.progress}%`);
                displayCourseDetails(course);
            }
        }

        // Function to render course list
        function renderCourseList(courseList = courses, category = null) {
            const courseListElement = document.getElementById('courseList');
            let filteredCourses = courseList;

            if (category && category !== 'all') {
                filteredCourses = courseList.filter(course => course.category === category);
            }

            courseListElement.innerHTML = filteredCourses.map(createCourseCard).join('');

            // Update course count
            document.getElementById('courseCount').textContent = `${filteredCourses.length} courses`;

            // Add event listeners to view course buttons
            const viewButtons = document.querySelectorAll('.view-course');
            viewButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const courseId = parseInt(e.target.getAttribute('data-course-id'));
                    const course = courses.find(c => c.id === courseId);
                    if (course) {
                        displayCourseDetails(course);
                    }
                });
            });
        }

        // Function to create category buttons
        function createCategoryButtons() {
            const categoryContainer = document.getElementById('categoryContainer');
            categoryContainer.innerHTML = `
        <button class="btn btn-outline-primary me-2 mb-2" data-category="all">All Courses</button>
        ${courseCategories.map(category =>
                `<button class="btn btn-outline-primary me-2 mb-2" data-category="${category}">${category}</button>`
            ).join('')}
    `;

            // Add event listeners to category buttons
            const buttons = categoryContainer.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const category = e.target.getAttribute('data-category');
                    renderCourseList(courses, category);
                });
            });
        }

        // Function to search courses
        function searchCourses() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase();
            const filteredCourses = courses.filter(course =>
                course.title.toLowerCase().includes(searchTerm) ||
                course.description.toLowerCase().includes(searchTerm)
            );
            renderCourseList(filteredCourses);
        }



        // Event listener for search button
        document.getElementById('searchButton').addEventListener('click', searchCourses);

        // Event listener for search input (search as you type)
        document.getElementById('searchInput').addEventListener('input', searchCourses);



        // JavaScript for login functionality
        document.addEventListener('DOMContentLoaded', function () {
            const loginButton = document.getElementById('loginButton');
            const loginContainer = document.getElementById('loginContainer');
            const profileContainer = document.getElementById('profileContainer');
            const userEmail = document.getElementById('userEmail');
            const logoutButton = document.getElementById('logoutButton');
            const profileDropdown = document.getElementById('profileDropdown');

            function updateLoginState() {
                const loggedInUser = localStorage.getItem('loggedInUser ');
                if (loggedInUser) {
                    loginContainer.style.display = 'none';
                    profileContainer.style.display = 'block';
                    userEmail.textContent = loggedInUser;
                } else {
                    loginContainer.style.display = 'block';
                    profileContainer.style.display = 'none';
                }
            }

            loginButton.addEventListener('click', function () {
                window.location.href = 'login.html';
            });

            logoutButton.addEventListener('click', function () {
                localStorage.removeItem('loggedInUser  ');
                updateLoginState();
            });

            // Add event listener for dropdown toggle
            profileDropdown.addEventListener('click', function (event) {
                event.stopPropagation();
                const dropdownMenu = this.nextElementSibling;
                dropdownMenu.classList.toggle('show');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function (event) {
                const dropdowns = document.getElementsByClassName('dropdown-menu');
                for (let i = 0; i < dropdowns.length; i++) {
                    const openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            });

            updateLoginState();


            // Function to sort courses
            function sortCourses(sortBy) {
                let sortedCourses = [...courses];
                switch (sortBy) {
                    case 'popularity':
                        sortedCourses.sort((a, b) => b.ratingCount - a.ratingCount);
                        break;
                    case 'rating':
                        sortedCourses.sort((a, b) => b.rating - a.rating);
                        break;
                    case 'newest':
                        sortedCourses.sort((a, b) => b.dateAdded - a.dateAdded);
                        break;
                }
                renderCourseList(sortedCourses);
             }

            // Event listeners for sort dropdown
            document.querySelectorAll('#sortDropdown .dropdown-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sortBy = e.target.getAttribute('data-sort');
                    sortCourses(sortBy);
                });
            });
        });

        // Initialize the page
        createCategoryButtons();
        renderCourseList();

        let model;
        let courseData;

        document.addEventListener('DOMContentLoaded', async function () {
            const chatButton = document.getElementById('chat-button');
            const chatContainer = document.getElementById('chat-container');
            const closeChat = document.getElementById('close-chat');
            const sendMessage = document.getElementById('send-message');
            const userInput = document.getElementById('user-input');
            const chatMessages = document.getElementById('chat-messages');

            // Load TensorFlow model
            model = await tf.loadLayersModel('https://storage.googleapis.com/tfjs-models/tfjs/sentiment_cnn_v1/model.json');

            // Fetch course data from hypothetical API
            courseData = await fetchCourseData();

            chatButton.addEventListener('click', () => {
                chatContainer.style.display = 'flex';
                chatButton.style.display = 'none';
            });

            closeChat.addEventListener('click', () => {
                chatContainer.style.display = 'none';
                chatButton.style.display = 'flex';
            });

            sendMessage.addEventListener('click', sendUserMessage);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendUserMessage();
                }
            });

            async function sendUserMessage() {
                const message = userInput.value.trim();
                if (message) {
                    addMessage(message, 'user-message');
                    userInput.value = '';
                    const botReply = await getBotReply(message);
                    addMessage(botReply, 'bot-message');
                }
            }

            function addMessage(message, className) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', className);
                messageElement.textContent = message;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            async function getBotReply(message) {
                const intent = await classifyIntent(message);
                let reply;

                switch (intent) {
                    case 'course_info':
                        reply = "We offer a wide range of courses. Can you tell me which subject area you're interested in?";
                        break;
                    case 'pricing':
                        reply = "Our course prices vary. We offer flexible payment options and financial aid for eligible students. Which course are you interested in?";
                        break;
                    case 'duration':
                        reply = "Course duration varies from a few weeks to several months. It depends on the program and your learning pace. Which course are you considering?";
                        break;
                    case 'certification':
                        reply = "Yes, upon successful completion of your chosen program, you'll receive a verified certificate.";
                        break;
                    case 'career':
                        reply = "Many of our graduates have successfully transitioned into new careers or advanced in their current roles. We also offer career services and job placement assistance.";
                        break;
                    default:
                        reply = "I'm not sure I understand. Could you rephrase your question?";
                }

                // Suggest courses based on user message
                const suggestedCourse = await suggestCourse(message);
                if (suggestedCourse) {
                    reply += `\n\nBased on your interest, you might like our ${suggestedCourse.title} course. Would you like more information?`;
                    addCourseSuggestion(suggestedCourse);
                }

                return reply;
            }

            async function classifyIntent(message) {
                const embedding = await use.load();
                const sentences = [message];
                const xPredict = await embedding.embed(sentences);
                const sentiment = await model.predict(xPredict).data();

                // Simple intent classification based on sentiment
                if (sentiment[0] > 0.7) return 'course_info';
                if (sentiment[0] > 0.5) return 'pricing';
                if (sentiment[0] > 0.3) return 'duration';
                if (sentiment[0] > 0.1) return 'certification';
                return 'career';
            }

            async function suggestCourse(message) {
                // Simple keyword matching for course suggestion
                const keywords = {
                    'web': 'Web Development',
                    'data': 'Data Science',
                    'marketing': 'Digital Marketing',
                    'ai': 'Artificial Intelligence',
                    'business': 'Business Analytics'
                };

                for (let [keyword, course] of Object.entries(keywords)) {
                    if (message.toLowerCase().includes(keyword)) {
                        return courseData.find(c => c.title === course);
                    }
                }

                return null;
            }

            function addCourseSuggestion(course) {
                const suggestionElement = document.createElement('div');
                suggestionElement.classList.add('course-suggestion');
                suggestionElement.innerHTML = `
                <h4>${course.title}</h4>
                <p>${course.description}</p>
                <button onclick="enrollCourse('${course.id}')">Enroll Now</button>
            `;
                chatMessages.appendChild(suggestionElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Initial bot message
            addMessage("Hello! How can I assist you today?", 'bot-message');
        });

        async function fetchCourseData() {
            // In a real implementation, this would be an API call
            return [
                { id: 1, title: 'Web Development', description: 'Learn full-stack web development from scratch.' },
                { id: 2, title: 'Data Science', description: 'Master the basics of data analysis and machine learning.' },
                { id: 3, title: 'Digital Marketing', description: 'Learn to create and execute effective marketing strategies.' },
                { id: 4, title: 'Artificial Intelligence', description: 'Dive into the world of AI and machine learning.' },
                { id: 5, title: 'Business Analytics', description: 'Learn to make data-driven business decisions.' }
            ];
        }

        function enrollCourse(courseId) {
            // In a real implementation, this would initiate the enrollment process
            alert(`Enrolling in course with ID: ${courseId}`);
        }
    </script>
</body>

</html>